(ns cli-skeleton\main
  (:require-file "vendor/autoload.php")
  (:use PhpParser\Error :as PPError)
  (:use PhpParser\NodeDumper)
  (:use PhpParser\ParserFactory))

(def code
"<?php
function test($foo)
{
    var_dump($foo);
}
CODE;
"
)

(def parser (php/-> (php/new ParserFactory) (createForNewestSupportedVersion)))

(def ast (php/-> parser (parse code)))

(def dumper (php/new NodeDumper))

(defn dump-ast []
  (php/-> dumper (dump ast)))

(when-not *build-mode*
  (println (dump-ast)))
